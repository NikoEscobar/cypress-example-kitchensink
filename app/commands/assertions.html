<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Kitchen Sink | Cypress Example" />
  <meta name="author" content="Cypress.io" />
  <meta name="copyright" content="Cypress.io Copyright (c) 2017" />

  <title>Cypress.io: Kitchen Sink</title>

  <link rel="icon" href="/assets/img/favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="/assets/css/vendor/bootstrap.min.css" />
  <link rel="stylesheet" href="/assets/css/vendor/fira.css" />
  <link rel="stylesheet" href="/assets/css/styles.css" />
  <link rel="stylesheet" href="/assets/css/languageSwitcher.css">
</head>

<body>
  <nav class="navbar navbar-inverse">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
          <span class="icon-bar"></span> <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">cypress.io</a>
      </div>
      <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li class="active" class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-mlr-text>Commands <span
                class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a href="/commands/querying" data-mlr-text>Querying</a></li>
              <li><a href="/commands/traversal" data-mlr-text>Traversal</a></li>
              <li><a href="/commands/actions" data-mlr-text>Actions</a></li>
              <li><a href="/commands/window" data-mlr-text>Window</a></li>
              <li><a href="/commands/viewport" data-mlr-text>Viewport</a></li>
              <li><a href="/commands/location" data-mlr-text>Location</a></li>
              <li><a href="/commands/navigation" data-mlr-text>Navigation</a></li>
              <li class="active"><a href="/commands/assertions" data-mlr-text>Assertions</a></li>
              <li><a href="/commands/misc" data-mlr-text>Misc</a></li>
              <li><a href="/commands/connectors" data-mlr-text>Connectors</a></li>
              <li><a href="/commands/aliasing" data-mlr-text>Aliasing</a></li>
              <li><a href="/commands/waiting" data-mlr-text>Waiting</a></li>
              <li><a href="/commands/network-requests" data-mlr-text>Network Requests</a></li>
              <li><a href="/commands/files" data-mlr-text>Files</a></li>
              <li><a href="/commands/local-storage" data-mlr-text>Local Storage</a></li>
              <li><a href="/commands/cookies" data-mlr-text>Cookies</a></li>
              <li><a href="/commands/spies-stubs-clocks" data-mlr-text>Spies, Stubs &amp; Clocks</a></li>
            </ul>
          </li>
          <li><a href="/utilities" data-mlr-text>Utilities</a></li>
          <li><a href="/cypress-api" data-mlr-text>Cypress API</a></li>
        </ul>
        <ul class="nav navbar-nav pull-right">
          <li><a href="https://github.com/cypress-io/cypress-example-kitchensink">GitHub</a></li>
          <li><select id="mbPOCControlsLangDrop" class="ls"></select></li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="banner">
    <div class="container">
      <h1 data-mlr-text>Assertions</h1>
      <p data-mlr-text>
        Examples of asserting the state or behavior of your application in
        Cypress, for a full reference of commands, go to
        <a href="https://on.cypress.io/api" target="_blank">docs.cypress.io</a>
      </p>
    </div>
  </div>
  <div class="container content-container">
    <div id="assertions">
      <div class="row">
        <div class="col-xs-12">
          <h3 data-mlr-text>Implicit Assertions</h3>
          <hr />
        </div>

        <div class="col-xs-7">
          <h4><a href="https://on.cypress.io/should" target="_blank">.should()</a></h4>
          <p data-mlr-text>
            To make an assertion about the current subject, use the
            <a href="https://on.cypress.io/should" target="_blank"><code>.should()</code></a>
            command.
          </p>
          <pre><code class="javascript">cy.get('.assertion-table')
  .find('tbody tr:last').should('have.class', 'success')
  .find('td')
  .first()
  // checking the text of the <td> element in various ways
  .should('have.text', 'Column content')
  .should('contain', 'Column content')
  .should('have.html', 'Column content')
  // chai-jquery uses "is()" to check if element matches selector
  .should('match', 'td')
  // to match text content against a regular expression
  // first need to invoke jQuery method text()
  // and then match using regular expression
  .invoke('text')
  .should('match', /column content/i)

// a better way to check element's text content against a regular expression
// is to use "cy.contains"
// https://on.cypress.io/contains
cy.get('.assertion-table')
  .find('tbody tr:last')
  // finds first <td> element with text content matching regular expression
  .contains('td', /column content/i)
  .should('be.visible')</code></pre>

          <p data-mlr-text>Note: find even more examples of matching element's text content in this
            <a href="https://on.cypress.io/using-cypress-faq#How-do-I-get-an-elementâ€™s-text-contents"
              target="_blank">FAQ answer</a>.
          </p>
        </div>
        <div class="col-xs-5">
          <div class="well">
            <table class="table table-bordered assertion-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Column heading</th>
                  <th>Column heading</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">1</th>
                  <td>Column content</td>
                  <td>Column content</td>
                </tr>
                <tr>
                  <th scope="row">2</th>
                  <td>Column content</td>
                  <td>Column content</td>
                </tr>
                <tr class="success">
                  <th scope="row">3</th>
                  <td>Column content</td>
                  <td>Column content</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="col-xs-12">
          <hr />
        </div>

        <div class="col-xs-7">
          <h4><a href="https://on.cypress.io/and" target="_blank">.and()</a></h4>
          <p data-mlr-text>
            To chain multiple assertions together, use the
            <a href="https://on.cypress.io/and" target="_blank"><code>.and()</code></a>
            command.
          </p>
          <pre><code class="javascript">cy.get('.assertions-link')
  .should('have.class', 'active')
  .and('have.attr', 'href')
  .and('include', 'cypress.io')</code></pre>
        </div>
        <div class="col-xs-5">
          <div class="well">
            <a class="assertions-link active" href="https://on.cypress.io" target="_blank">Cypress Docs</a>
          </div>
        </div>

        <div class="col-xs-12">
          <hr />
        </div>

        <div class="col-xs-12">
          <h3 data-mlr-text>Explicit Assertions</h3>
          <hr />
        </div>

        <div class="col-xs-12">
          <h4>expect</h4>
          <p data-mlr-text>
            To make a BDD assertion about a specified subject, use
            <a href="https://on.cypress.io/assertions" target="_blank"><code>expect</code></a>.
          </p>
        </div>

        <div class="col-xs-7">
          <pre><code class="javascript">expect(true).to.be.true
const o = { foo: 'bar' }
expect(o).to.equal(o)
expect(o).to.deep.equal({ foo: 'bar' })
// matching text using regular expression
expect('FooBar').to.match(/bar$/i)</code></pre>
        </div>

        <div class="col-xs-12">
          <hr />
        </div>

        <div class="col-xs-7">
          <h4>assert</h4>
          <p data-mlr-text>
            To make a TDD assertion about a specified subject, use
            <a href="https://on.cypress.io/assertions" target="_blank"><code>assert</code></a>.
          </p>
          <pre><code class="javascript">const person = {
  name: 'Joe',
  age: 20,
}
assert.isObject(person, 'value is object')</code></pre>
        </div>

        <div class="col-xs-12">
          <hr />
        </div>

        <div class="col-xs-12">
          <h3><a href="https://on.cypress.io/should#Function" target="_blank" data-mlr-text>Should with callback
              function</a></h3>
          <hr />
        </div>

        <div class="col-xs-12">
          <p data-mlr-text>
            You can write your own complicated checks using
            <code>.should(cb)</code> function if included assertions are not
            enough. Pass a function to <code>should()</code> with any number
            of explicit assertions within it. The callback function will be
            retried until it passes all your explicit assertions or times out.
          </p>
        </div>

        <div class="col-xs-7">
          <pre><code class="javascript">cy.get('.assertions-p').find('p')
  .should(($p) => {
    // return an array of texts from all of the p's
    let texts = $p.map((i, el) => // https://on.cypress.io/$
      Cypress.$(el).text())

    // jquery map returns jquery object
    // and .get() convert this to simple array
    texts = texts.get()

    // array should have length of 3
    expect(texts).to.have.length(3)

    // use second argument to expect(...) to provide clear
    // message with each assertion
    expect(texts, 'has expected text in each paragraph').to.deep.eq([
      'Some text from first p',
      'More text from second p',
      'And even more text from third p',
    ])
  })</code></pre>
        </div>
        <div class="col-xs-5">
          <div class="well">
            <div class="assertions-p">
              <p>Some text from first p</p>
              <p>More text from second p</p>
              <p>And even more text from third p</p>
            </div>
          </div>
        </div>

        <div class="col-xs-12">
          <p data-mlr-text>Assert that element's class includes <code>heading-</code>.</p>
        </div>

        <div class="col-xs-7">
          <pre><code class="javascript">cy.get('.docs-header').find('div')
  // .should(cb) callback function will be retried
  .should(($div) => {
    expect($div).to.have.length(1)

    const className = $div[0].className

    expect(className).to.match(/heading-/)
  })
  // .then(cb) callback is not retried,
  // it either passes or fails
  .then(($div) => {
    expect($div).to.have.text('Introduction')
  })</code></pre>
        </div>

        <div class="col-xs-5">
          <div class="well">
            <div class="docs-header">
              <div class="main-abc123 heading-xyz987">Introduction</div>
            </div>
          </div>
        </div>

        <div class="col-xs-12">
          <p data-mlr-text>
            You can throw any error from the callback function. The callback
            will be retried, but the assertions will not be shown as nicely in
            the Command Log UI as Chai assertions.
          </p>
        </div>

        <div class="col-xs-7">
          <pre><code class="javascript">cy.get('.docs-header').find('div')
  .should(($div) => {
    if ($div.length !== 1) {
      // you can throw your own errors
      throw new Error('Did not find 1 element')
    }

    const className = $div[0].className

    if (!className.match(/heading-/)) {
      throw new Error(`Could not find class "heading-" in ${className}`)
    }
  })</code></pre>
        </div>

        <div class="col-xs-12">
          <p data-mlr-text>
            We <a href="https://on.cypress.io/conditional-testing">strongly recommend that your tests are
              deterministic</a>.
            But sometimes you might need to match text between two elements, and you
            do not know what that text should be. Save the value from the first element,
            then compare it from a <code>should(cb)</code> callback.
          </p>
        </div>

        <div class="col-xs-7">
          <pre><code class="javascript">let text
/**
* Normalizes passed text,
* useful before comparing text with spaces and different capitalization.
* @param {string} s Text to normalize
*/
const normalizeText = (s) => s.replace(/\s/g, '').toLowerCase()

cy.get('.two-elements')
.find('.first')
.then(($first) => {
  // save text from the first element
  text = normalizeText($first.text())
})

cy.get('.two-elements')
.find('.second')
.should(($div) => {
  // we can massage text before comparing
  const secondText = normalizeText($div.text())
  expect(secondText, 'second text').to.equal(text)
})</code></pre>
        </div>

        <div class="col-xs-5">
          <div class="well">
            <div class="two-elements">
              <div class="first">Foo Bar</div>
              <div class="second">foo b a r</div>
            </div>
          </div>
        </div>

        <div class="col-xs-12">
          <hr />
        </div>
      </div>
    </div>
  </div>

  <script src="/assets/js/vendor/jquery-1.12.0.min.js"></script>
  <script src="/assets/js/vendor/bootstrap.min.js"></script>
  <script src="/assets/js/vendor/highlight.pack.js"></script>
  <script src="/assets/js/scripts.js"></script>
  <script type="module" src="/assets/js/languageSwitcher.js"></script>
</body>

</html>